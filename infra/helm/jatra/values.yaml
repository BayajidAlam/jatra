# Default values for jatra
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Global configuration
global:
  namespace: jatra
  environment: production
  imagePullPolicy: IfNotPresent
  imageRegistry: your-registry.com/jatra

# Database configuration
postgresql:
  enabled: true
  auth:
    username: jatra_user
    password: jatra_password
    database: jatra_db
  primary:
    persistence:
      enabled: true
      size: 20Gi
  replicaCount: 2

# Redis configuration
redis:
  enabled: true
  auth:
    password: jatra_redis_pass
  master:
    persistence:
      enabled: true
      size: 5Gi
  replica:
    replicaCount: 2

# RabbitMQ configuration
rabbitmq:
  enabled: true
  auth:
    username: jatra_user
    password: jatra_password
  persistence:
    enabled: true
    size: 8Gi
  replicaCount: 2

# Microservices configuration
services:
  apiGateway:
    enabled: true
    replicaCount: 3
    image:
      repository: api-gateway
      tag: latest
    port: 8080
    resources:
      requests:
        cpu: 200m
        memory: 256Mi
      limits:
        cpu: 1000m
        memory: 1Gi
    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70

  authService:
    enabled: true
    replicaCount: 3
    image:
      repository: auth-service
      tag: latest
    port: 3000
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70

  userService:
    enabled: true
    replicaCount: 2
    image:
      repository: user-service
      tag: latest
    port: 3001
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8

  scheduleService:
    enabled: true
    replicaCount: 2
    image:
      repository: schedule-service
      tag: latest
    port: 3002
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8

  searchService:
    enabled: true
    replicaCount: 3
    image:
      repository: search-service
      tag: latest
    port: 3003
    resources:
      requests:
        cpu: 200m
        memory: 256Mi
      limits:
        cpu: 1000m
        memory: 1Gi
    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 15

  seatReservationService:
    enabled: true
    replicaCount: 5
    image:
      repository: seat-reservation-service
      tag: latest
    port: 3004
    resources:
      requests:
        cpu: 200m
        memory: 256Mi
      limits:
        cpu: 1000m
        memory: 1Gi
    autoscaling:
      enabled: true
      minReplicas: 5
      maxReplicas: 20

  bookingService:
    enabled: true
    replicaCount: 3
    image:
      repository: booking-service
      tag: latest
    port: 3005
    resources:
      requests:
        cpu: 150m
        memory: 256Mi
      limits:
        cpu: 750m
        memory: 768Mi
    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 15

  paymentService:
    enabled: true
    replicaCount: 3
    image:
      repository: payment-service
      tag: latest
    port: 3006
    resources:
      requests:
        cpu: 150m
        memory: 256Mi
      limits:
        cpu: 750m
        memory: 768Mi
    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10

  ticketService:
    enabled: true
    replicaCount: 3
    image:
      repository: ticket-service
      tag: latest
    port: 3007
    resources:
      requests:
        cpu: 150m
        memory: 256Mi
      limits:
        cpu: 750m
        memory: 768Mi
    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10

  notificationService:
    enabled: true
    replicaCount: 5
    image:
      repository: notification-service
      tag: latest
    port: 3008
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
    autoscaling:
      enabled: true
      minReplicas: 5
      maxReplicas: 15

  adminService:
    enabled: true
    replicaCount: 2
    image:
      repository: admin-service
      tag: latest
    port: 3009
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi

  reportingService:
    enabled: true
    replicaCount: 2
    image:
      repository: reporting-service
      tag: latest
    port: 3010
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/rate-limit: "100"
  hosts:
    - host: api.jatra.com
      paths:
        - path: /
          pathType: Prefix
          service: api-gateway
  tls:
    - secretName: jatra-tls
      hosts:
        - api.jatra.com

# Monitoring
monitoring:
  enabled: true
  prometheus:
    enabled: true
  grafana:
    enabled: true
